<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Pitter Patter Peter <3</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;

       background-image: url('https://example.com/your-image.jpg'); 
       background-size: cover; 
       background-position: center; 
       background-repeat: no-repeat;
       height: 100vh;
       margin: 0;
       font-family: Arial, sans-serif;


      }
      #randomNumber {
        font-size: 3rem;
        margin: 20px 0;
      }
      button {
        padding: 10px 20px;
        font-size: 1.2rem;
        cursor: pointer;
        border: none;
        background-color: #4caf50;
        color: #fff;
        border-radius: 8px;
      }
      button:hover {
        background-color: #45a049;
      }
      .question-container {
        text-align: center;
        max-width: 500px;
        margin: 0 auto;
      }
      #game {
        position: relative;
        width: 80vw;
        height: 60vh;
        border: 2px solid #333;
        background: white;
        overflow: hidden;
        margin-top: 40px;
      }
      .heart {
        width: 50px;
        height: 50px;
        position: absolute;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: left 0.1s, top 0.1s;
        background-color: rgba(255, 0, 0, 0.2); /* for visibility */
      }
      .heart::before {
        content: "\2764";
        font-size: 40px;
        color: red;
      }
      #score {
        font-size: 1.2rem;
        margin-top: 15px;
      }
    </style>
  </head>
  <body>
    <h1 style="text-align: center;">Pitter Patter Peter <3</h1>

    <!-- Compatibility Quiz -->
    <div class="question-container">
      <label>Are you of the female species?</label><br />
      <select id="q1">
        <option value="">Choose an answer</option>
        <option value="5">Strongly Agree</option>
        <option value="4">Agree</option>
        <option value="3">Neither agree nor disagree</option>
        <option value="2">Disagree</option>
        <option value="1">Strongly Disagree</option>
      </select>
      <br /><br />

      <label>Are you a fan of feminist literature like I am (6'3 btw)?</label><br />
      <select id="q2">
        <option value="">Choose an answer</option>
        <option value="5">Strongly Agree</option>
        <option value="4">Agree</option>
        <option value="3">Neither agree nor disagree</option>
        <option value="2">Disagree</option>
        <option value="1">Strongly Disagree</option>
      </select>
      <br /><br />

      <label>Are you single?</label><br />
      <select id="q3">
        <option value="">Choose an answer</option>
        <option value="5">Strongly Agree</option>
        <option value="4">Agree</option>
        <option value="3">Neither agree nor disagree</option>
        <option value="2">Disagree</option>
        <option value="1">Strongly Disagree</option>
      </select>
      <br /><br />

      <label>?</label>are you REALLY single?<br />
      <select id="q4">
        <option value="">Choose an answer</option>
        <option value="5">No</option>
        <option value="4">Yes</option>
        <option value="3">Yes</option>
        <option value="2">Yes</option>
        <option value="1">Yes</option>
      </select>
      <br /><br />

      <label>Are you 5 raccoons in a trench coat trying to steal my kidneys?</label><br />
      <select id="q5">
        <option value="">Choose an answer</option>
        <option value="5">Strongly Agree</option>
        <option value="4">Agree</option>
        <option value="3">Neither agree nor disagree</option>
        <option value="2">Disagree</option>
        <option value="1">Strongly Disagree</option>
      </select>
      <br /><br />

      <label>Are you looking for an extremely wealthy man?</label><br />
      <select id="q6">
        <option value="">Choose an answer</option>
        <option value="5">Strongly Agree</option>
        <option value="4">Agree</option>
        <option value="3">Neither agree nor disagree</option>
        <option value="2">Disagree</option>
        <option value="1">Strongly Disagree</option>
      </select>
      <br /><br />

      <label>Would you like to travel around the world?</label><br />
      <select id="q7">
        <option value="">Choose an answer</option>
        <option value="5">Strongly Agree</option>
        <option value="4">Agree</option>
        <option value="3">Neither agree nor disagree</option>
        <option value="2">Disagree</option>
        <option value="1">Strongly Disagree</option>
      </select>
      <br /><br />

      <label>WOuld you like to live in a city?</label><br />
      <select id="q8">
        <option value="">Choose an answer</option>
        <option value="5">Strongly Agree</option>
        <option value="4">Agree</option>
        <option value="3">Neither agree nor disagree</option>
        <option value="2">Disagree</option>
        <option value="1">Strongly Disagree</option>
      </select>
      <br /><br />

      <label>Are you athletic?</label><br />
      <select id="q9">
        <option value="">Choose an answer</option>
        <option value="5">Strongly Agree</option>
        <option value="4">Agree</option>
        <option value="3">Neither agree nor disagree</option>
        <option value="2">Disagree</option>
        <option value="1">Strongly Disagree</option>
      </select>
      <br /><br />

      <label>Do you like tall men?</label><br />
      <select id="q10">
        <option value="">Choose an answer</option>
        <option value="5">Strongly Agree</option>
        <option value="4">Agree</option>
        <option value="3">Neither agree nor disagree</option>
        <option value="2">Disagree</option>
        <option value="1">Strongly Disagree</option>
      </select>
      <br /><br />
    </div>

    <div id="randomNumber">%</div>
    <button onclick="calculateCompatibility()">Calculate Compatibility</button>

    <!-- Audio -->
    <audio id="highScoreSound" src="" preload="auto"></audio>
    <audio id="midScoreSound" src="" preload="auto"></audio>
    <audio id="lowScoreSound" src="https://www.fesliyanstudios.com/play-mp3/6688" preload="auto"></audio>

    <!-- Minigame -->
    <div id="game">
      <div class="heart" id="circle"></div>
    </div>
    <div id="score">Score: 0</div>

    <script>
  function calculateCompatibility() {
    let totalScore = 0;
    let answeredQuestions = 0;
    const negativeQuestions = [2]; // Add more negative Qs here

    for (let i = 1; i <= 10; i++) {
      const val = document.getElementById('q' + i).value;
      if (val === '') continue;
      let value = parseInt(val);
      if (negativeQuestions.includes(i)) {
        value = 6 - value;
      }
      totalScore += value;
      answeredQuestions++;
    }

    if (answeredQuestions === 0) {
      document.getElementById('randomNumber').textContent = "Answer at least one!";
      return;
    }

    const compatibility = ((totalScore - answeredQuestions) / (4 * answeredQuestions)) * 100;
    const rounded = Math.round(compatibility);
    document.getElementById('randomNumber').textContent = rounded + "%";

    if (rounded >= 80) {
      document.getElementById('highScoreSound').play();
    } else if (rounded >= 40) {
      document.getElementById('midScoreSound').play();
    } else {
      document.getElementById('lowScoreSound').play();
    }
  }

  // This function will close the window if value "5" is selected for question 4
  function checkQuestion4() {
    const q4Value = document.getElementById('q4').value;
    if (q4Value === "5") {
      // Close the window
      window.close();
    }
  }

  window.onload = () => {
    const game = document.getElementById('game');
    const scoreDisplay = document.getElementById('score');
    let score = 0;

    function moveCircleRandom(circle) {
      const maxX = game.clientWidth - circle.clientWidth;
      const maxY = game.clientHeight - circle.clientHeight;
      const x = Math.random() * maxX;
      const y = Math.random() * maxY;
      circle.style.left = `${x}px`;
      circle.style.top = `${y}px`;
    }

    function avoidMouse(e) {
      const rect = game.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      const mouseY = e.clientY - rect.top;
      const circleX = e.target.offsetLeft + e.target.offsetWidth / 2;
      const circleY = e.target.offsetTop + e.target.offsetHeight / 2;
      const dx = circleX - mouseX;
      const dy = circleY - mouseY;
      const distance = Math.sqrt(dx * dx + dy * dy);

      if (distance < 80) {
        const angle = Math.atan2(dy, dx);
        const newX = e.target.offsetLeft + Math.cos(angle) * 50;
        const newY = e.target.offsetTop + Math.sin(angle) * 50;

        const maxX = game.clientWidth - e.target.clientWidth;
        const maxY = game.clientHeight - e.target.clientHeight;
        e.target.style.left = `${Math.max(0, Math.min(maxX, newX))}px`;
        e.target.style.top = `${Math.max(0, Math.min(maxY, newY))}px`;
      }
    }

    function onCircleClick(e) {
      // Increase the score after each click
      score += 1;
      scoreDisplay.textContent = 'Score: ' + score;

      // 50% chance to multiply the heart
      if (Math.random() < 0.5) {
        const newHeart = document.createElement('div');
        newHeart.classList.add('heart');
        game.appendChild(newHeart);
        moveCircleRandom(newHeart);

        newHeart.addEventListener('click', onCircleClick); // Add click event to new heart
      }

      moveCircleRandom(e.target);
    }

    const circle = document.getElementById('circle');
    circle.addEventListener('click', onCircleClick);
    game.addEventListener('mousemove', avoidMouse);

    moveCircleRandom(circle);

    // Add the event listener for question 4 to check for the value "5"
    document.getElementById('q4').addEventListener('change', checkQuestion4);
  };
    </script>
  </body>
</html>
